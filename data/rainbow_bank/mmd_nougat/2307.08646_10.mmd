These results show the difference between the global and local effects of an attribute, which our model can capture by flexibly defining the global and local utility functions. Moreover, it was also shown that we can analyze to what extent and which attributes globally and locally affect the path choice behavior by estimating and comparing different specifications with respect to attributes of interest, including one with the attribute introduced to both the global and local utilities. 

### 5.2. Real pedestrian path choice application 

We then show an application of the proposed path choice model to pedestrian path choice analysis using real path observations. Because walking is a slow mode of transportation, pedestrians may visually perceive the street environment while walking and locally adjust their path choice behavior, which we analyze by using the proposed model. The data is the same as used in  Oyama  ( 2023 ), based on GPS trajectories collected through a complementary survey of the Sixth Tokyo Metropolitan Region Person Trip Survey ( Ministry of Land, Infrastructure, Transport and Tourism of Japan ,  2018 ), in the Kannai area, Yokohama city, Japan. The pedestrian network for the case study contains 724 nodes and 2398 links with 8434 link pairs, as shown in Figure  4 . 

In this case study, we consider the following three specifications of the reward function: 

\[\left\{\begin{array}[]{c l}v_{G}(a|k)&=(\beta^{G}_{\rm{len}}+ \beta^{G}_{\rm{walk}}x^{\rm walk}_{a}+\beta^{G}_{\rm{green}}x^{\rm green}_{a}) x^{\rm len}_{a}+\beta^{G}_{\rm{cross}}x^{\rm cross}_{a}-20x^{\rm uturn}_{a|k} \\ v_{L}(a|k)&=0\\ \end{array}\right.\] (190.1c) \[\left\{\begin{array}[]{c l}v_{G}(a|k)&=(\beta^{G}_{\rm{len}}+ \beta^{G}_{\rm{walk}}x^{\rm walk}_{a})x^{\rm len}_{a}+\beta^{G}_{\rm{cross}}x^ {\rm cross}_{a}-20x^{\rm uturn}_{a|k}\\ v_{L}(a|k)&=\beta^{L}_{\rm{green}}x^{\rm green}_{a}x^{\rm len}_{a}\\ \end{array}\right.\] (190.1f) \[\left\{\begin{array}[]{c l}v_{G}(a|k)&=(\beta^{G}_{\rm{len}}+ \beta^{G}_{\rm{walk}}x^{\rm walk}_{a}+\beta^{G}_{\rm{green}}x^{\rm green}_{a}) x^{\rm len}_{a}+\beta^{G}_{\rm{cross}}x^{\rm cross}_{a}-20x^{\rm uturn}_{a|k} \\ v_{L}(a|k)&=\beta^{L}_{\rm{green}}x^{\rm green}_{a}x^{\rm len}_{a}\\ \end{array}\right.\] (190.1i)  

where \(x^{\rm len}_{a}\)and \(x^{\rm walk}_{a}\)are respectively the length and sidewalk width (m/10) of link \(a\); \(x^{\rm cross}_{a}\)is the dummy variable of \(a\) being a crosswalk; \(x^{\rm green}_{a}\)is the green view index (GVI) of the street, extracted as the vegetation pixel ratio ( \(\in[0,1]\)) from Google Street View images using a deep learning model 3 3 Oyama  ( 2023 ) assumed \(x^{\rm green}_{a}\). We capture the effects of sidewalk widths and GVI to be a dummy variable simply representing the presence of streetscape greenery. Instead, we calculated the by interactions with the length so that the link-additive nature of the global path choice is retained. We also add a GVI through semantic segmentation by DeepLabv3 ( Chen et al. ,  2018 ). fixed negative u-turn penalty \({\rm Uturn}_{a|k}\), following previous studies of RL models (e.g.,  Fosgerau et al. ,  2013 ). The parameters to be estimated are \(\beta^{G}_{\rm{len}}\), \(\beta^{G}_{\rm{walk}}\), \(\beta^{G}_{\rm{cross}}\), \(\beta^{G}_{\rm{green}}\)and \(\beta^{L}_{\rm{green}}\). 

We hypothesized that the visual quality of the streets like GVI is locally perceived by pedestrians and affects their local path choice. To test this hypothesis, we compare the three specifications ( 5.2a )-( 5.2c ). The first specification ( 5.2a ) assumes the GVI as a global attribute, which coincides with an RL model ( Fosgerau et al. ,  2013 ), and the second ( 5.2b ) does it as a local attribute. The third specification ( 5.2c ) introduces the attribute to both global and local Table 3: Esti mat esul ages and standard errors of the estimates over 10 samples. 

\begin{tabular}{l l r r r r r r r}
\hline \hline
 & & \multicolumn{7}{c}{Estimated model} \\
\cline{3-9}
 & & \multicolumn{2}{c}{Model G (175.1c)} & \multicolumn{2}{c}{Model L (175.1f)} & \multicolumn{3}{c}{Model GL (175.1i)} \\
\cline{3-9}
Data generated by & & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) \\
\hline
Model G (175.1c) & Average & -2.49 & 0.51 & -1.87 & 0.10 & -2.50 & 0.52 & -0.05 \\
(Data G) & Std.err. & 0.22 & 0.10 & 0.09 & 0.09 & 0.22 & 0.10 & 0.06 \\
\hline
Model L (175.1f) & Average & -2.72 & 0.78 & -2.47 & 1.97 & -2.48 & 0.03 & 1.94 \\
(Data L) & Std.err. & 0.14 & 0.08 & 0.10 & 0.13 & 0.13 & 0.11 & 0.12 \\ \hline \hline
\end{tabular}
\begin{tabular}{l l r r r r r r r}
\hline \hline
 & & \multicolumn{7}{c}{Estimated model} \\
\cline{3-9}
 & & \multicolumn{2}{c}{Model G (175.1c)} & \multicolumn{2}{c}{Model L (175.1f)} & \multicolumn{3}{c}{Model GL (175.1i)} \\
\cline{3-9}
Data generated by & & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) \\
\hline
Model G (175.1c) & Average & -2.49 & 0.51 & -1.87 & 0.10 & -2.50 & 0.52 & -0.05 \\
(Data G) & Std.err. & 0.22 & 0.10 & 0.09 & 0.09 & 0.22 & 0.10 & 0.06 \\
\hline
Model L (175.1f) & Average & -2.72 & 0.78 & -2.47 & 1.97 & -2.48 & 0.03 & 1.94 \\
(Data L) & Std.err. & 0.14 & 0.08 & 0.10 & 0.13 & 0.13 & 0.11 & 0.12 \\ \hline \hline
\end{tabular}
\begin{tabular}{l l r r r r r r r}
\hline \hline
 & & \multicolumn{7}{c}{Estimated model} \\
\cline{3-9}
 & & \multicolumn{2}{c}{Model G (175.1c)} & \multicolumn{2}{c}{Model L (175.1f)} & \multicolumn{3}{c}{Model GL (175.1i)} \\
\cline{3-9}
Data generated by & & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) \\
\hline
Model G (175.1c) & Average & -2.49 & 0.51 & -1.87 & 0.10 & -2.50 & 0.52 & -0.05 \\
(Data G) & Std.err. & 0.22 & 0.10 & 0.09 & 0.09 & 0.22 & 0.10 & 0.06 \\
\hline
Model L (175.1f) & Average & -2.72 & 0.78 & -2.47 & 1.97 & -2.48 & 0.03 & 1.94 \\
(Data L) & Std.err. & 0.14 & 0.08 & 0.10 & 0.13 & 0.13 & 0.11 & 0.12 \\ \hline \hline
\end{tabular}
\begin{tabular}{l l r r r r r r r}
\hline \hline
 & & \multicolumn{7}{c}{Estimated model} \\
\cline{3-9}
 & & \multicolumn{2}{c}{Model G (175.1c)} & \multicolumn{2}{c}{Model L (175.1f)} & \multicolumn{3}{c}{Model GL (175.1i)} \\
\cline{3-9}
Data generated by & & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) \\
\hline
Model G (175.1c) & Average & -2.49 & 0.51 & -1.87 & 0.10 & -2.50 & 0.52 & -0.05 \\
(Data G) & Std.err. & 0.22 & 0.10 & 0.09 & 0.09 & 0.22 & 0.10 & 0.06 \\
\hline
Model L (175.1f) & Average & -2.72 & 0.78 & -2.47 & 1.97 & -2.48 & 0.03 & 1.94 \\
(Data L) & Std.err. & 0.14 & 0.08 & 0.10 & 0.13 & 0.13 & 0.11 & 0.12 \\ \hline \hline
\end{tabular}
\begin{tabular}{l l r r r r r r r}
\hline \hline
 & & \multicolumn{7}{c}{Estimated model} \\
\cline{3-9}
 & & \multicolumn{2}{c}{Model G (175.1c)} & \multicolumn{2}{c}{Model L (175.1f)} & \multicolumn{3}{c}{Model GL (175.1i)} \\
\cline{3-9}
Data generated by & & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) \\
\hline
Model G (175.1c) & Average & -2.49 & 0.51 & -1.87 & 0.10 & -2.50 & 0.52 & -0.05 \\
(Data G) & Std.err. & 0.22 & 0.10 & 0.09 & 0.09 & 0.22 & 0.10 & 0.06 \\
\hline
Model L (175.1f) & Average & -2.72 & 0.78 & -2.47 & 1.97 & -2.48 & 0.03 & 1.94 \\
(Data L) & Std.err. & 0.14 & 0.08 & 0.10 & 0.13 & 0.13 & 0.11 & 0.12 \\ \hline \hline
\end{tabular}
\begin{tabular}{l l r r r r r r r}
\hline \hline
 & & \multicolumn{7}{c}{Estimated model} \\
\cline{3-9}
 & & \multicolumn{2}{c}{Model G (175.1c)} & \multicolumn{2}{c}{Model L (175.1f)} & \multicolumn{3}{c}{Model GL (175.1i)} \\
\cline{3-9}
Data generated by & & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) & \(\hat{\beta}^{G}_{\rm{len}}\) & \(\hat{\beta}^{G}_{\rm{cap}}\) & \(\hat{\beta}^{L}_{\rm{cap}}\) \\
\hline
Model G (175.1c) & Average & -2.49 & 0.51 & -1.87 & 0.10 & -2.50 & 0.52 & -0.05 \\
(Data G) & Std.err. & 0.22 & 0.10 & 0.09 & 0.09 & 0.22 & 0.10 & 0.06 \\
\hline
Model L (175.1f) & Average & -2.72 & 0.78 & -2.47 & 1.97 & -2.48 & 0.03 & 1.94 \\
(Data L) & Std.err. & 0.14 & 0.08 & 0.10 & 0.13 & 0.13 & 0.11 & 0.12 \\ \hline \hline
\end{tabular}
