# SHELAHâ€™S MAIN GAP AND THE GENERALIZED BOREL-REDUCIBILITY 

Let us denote by \(\mathcal{T}=(\kappa\times\omega\times\operatorname{acc}(\kappa)\times\gamma \times\kappa\times\kappa\times\kappa\times\kappa)^{\leq\gamma}\)\(\{\xi_{i}\in\kappa^{\leq\omega}\mathrel{|}\allowbreak 0<i\leq 8\}\)\(i\leq 8\). For every \(\xi\in\mathcal{T}\)there are functions \(\{\xi_{i}\in\kappa^{\leq\omega}\mathrel{|}\allowbreak 0<i\leq 8\}\),
  such that for all \(i\leq 8\),
 \(dom(\xi_{i})=dom(\xi)\)and for all \(n\in dom(\xi)\),
 \(\xi(n)=(\xi_{1}(n),\xi_{2}(n),\xi_{3}(n),\xi_{4}(n),\xi_{5}(n),\xi_{6}(n),\xi_ {7}(n),\xi_{8}(n))\).
 For every \(\xi\in\mathcal{T}\)let us denote
 \((\xi_{4},\xi_{5},\xi_{6},\xi_{7},\xi_{8})\)by
 \(\overline{\xi}\). 

Definition
  For all \(\alpha\in\operatorname{acc}(\kappa)\)and
 \(\eta\in\mathcal{T}\)with \(\overline{\eta}\in J_{f}\), \(dom(\eta)=m<\gamma\)define
 \(\Gamma_{\eta}^{\alpha}\)as follows: 

If \(\overline{\eta}\in J_{f}^{\alpha}\), then
 \(\Gamma_{\eta}^{\alpha}\)is the set of elements \(\xi\)of \(\mathcal{T}\)such that: 

\(\xi\mathbin{\upharpoonright}m=\eta,\)\(\overline{\xi}\mathbin{\upharpoonright}dom(\xi)\backslash m\in W^{\alpha}_{ \eta},\)on
 \(\xi_{3}\) is constant on \(dom(\xi)\backslash m,\)\(\xi_{3}(m)=\alpha\), (5) for all \(n\in dom(\xi)\backslash m\), let \(\xi_{2}(n)\)be the unique
 \(r<\omega\)such that \(\sigma_{\zeta}^{\alpha}(r)=\overline{\xi}(n)\),
 where \(\zeta=\overline{\xi}\mathbin{\upharpoonright}n\). 

If \(\overline{\eta}\notin J_{f}^{\alpha}\), then
 \(\Gamma_{\eta}^{\alpha}=\emptyset\). 

For \(\eta\in\mathcal{T}\)with \(\overline{\eta}\in J_{f}\), \(dom(\eta)=m<\gamma\)define \[\Gamma(\eta)=\bigcup_{\alpha\in\operatorname{acc}(\kappa)}\Gamma_{\eta}^{ \alpha}.\]  Finally we can define \(A^{f}\)by induction. Let \(T_{f}(0)=\{\emptyset\}\) and for all \(n<\gamma\), \[T_{f}(n+1)=T_{f}(n)\cup\bigcup_{\eta\in T_{f}(n)~{}dom(\eta)=n}\Gamma(\eta).\]  For \(n\leq\gamma\)a limit ordinal, \[\bar{T}_{f}(n)=\bigcup_{m<n}T_{f}(m)\]  \[\bar{T}_{f}(n)=\bigcup_{m<n}T_{f}(m)\]  and \[T_{f}(n)=\bar{T}_{f}(n)\cup\{\eta\in\mathcal{T}\mathrel{|}\allowbreak dom(\eta )=n\ \&\ \forall m<n\ (\eta\mathbin{\upharpoonright}m\in\bar{T}_{f}(n))\}.\]  

For
 \(0<i\leq 8\)let us denote by
 \(s_{i}(\eta)=sup\{\eta_{i}(n)\mathrel{|}\allowbreak n<\gamma\}\) and \(s_{\gamma}(\eta)=max\{s_{i}(\eta)\mathrel{|}\allowbreak i\leq 8\}\). Finally \[A^{f}=T_{f}(\gamma).\]  

Define the color function \(d_{f}\)by 

\[d_{f}(\eta)=\begin{cases}c_{f}(\overline{\eta})&\mbox{if }s_{1}(\eta)<s_{ \gamma}(\eta)\\ f(s_{1}(\eta))&\mbox{if }s_{1}(\eta)=s_{\gamma}(\eta).\end{cases}\]  

It is clear that \(A^{f}\)is closed under initial segments, indeed the relations \(\prec\),
 \((P_{n})_{n\leq\gamma}\), and \(\wedge\)

Now
 

of Definition 3.11 have a canonical interpretation in \(A^{f}\). 

Now we finish the construction of \(A^{f}\)by using the \(\kappa\)-colorable linear order \(I\)of . We have to define
 \(<\mathbin{\upharpoonright}Suc_{A^{f}}(\eta)\)for all
 \(\eta\in A^{f}\)with domain smaller than \(\gamma\). Properly speaking, \(A^{f}\)will not be an ordered coloured tree as in Definition 3.11, but it will be isomorphic to an ordered coloured tree as in Definition 3.11. 

Let us proceed to define \(<\mathbin{\upharpoonright}Suc_{A^{f}}(\eta)\). Let
 \(F:I\rightarrow\kappa\)be a \(\kappa\)-coloration of \(I\). 

For any \(\eta\in A^{f}\)with domain \(m+1<\gamma\), we will define the order \(<\mathbin{\upharpoonright}Suc_{A^{f}}(\eta)\)such that it is isomorphic to \(I\)and satisfies the following: 

\((\ast)\)_For any set_ \(B\subset Suc_{A^{f}}(\eta)\)_ of size less than_ \(\kappa\)_,_ \(p(x)\)For any set
 \(B\subset Suc_{A^{f}}(\eta)\)of size less than
 \(\kappa\),
 \(p(x)\)(*)
For any set ðµâŠ‚ð‘†ð‘¢ð‘ð´ð‘“(ðœ‚) of size less than ðœ…, ð‘(ð‘¥) a type of basic formulas over ðµin the variable ð‘¥, and any tuple (ðœ—2, ðœ—3) âˆˆðœ”Ã— acc(ðœ…) with ðœ—3 â‰¥
 \(B\)in the variable
 \(x\), and any tuple
 \((\vartheta_{2},\vartheta_{3})\in\omega\times\operatorname{acc}(\kappa)\)with
 \(\vartheta_{3}\geq\eta_{3}(m)\)\(B\)_in the variable_ \(x\)_, and any tuple_ \((\vartheta_{2},\vartheta_{3})\in\omega\times\operatorname{acc}(\kappa)\)\(\kappa\)_ with_ \(\vartheta_{3}\geq\eta_{3}(m)\)that
 _, if_ \(p(x)\)_ is realized in_ \(Suc_{A^{f}}(\eta)\)_, then there are_ \(\kappa\)_many_ \(\alpha<\kappa\)_such that_ \(\eta^{\frown}(\alpha,\vartheta_{2},\vartheta_{3},\sigma^{\vartheta_{3}}_{ \overline{\eta}}(\vartheta_{2}))\models p\)_._ 