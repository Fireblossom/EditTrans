a) The di ff usion example showing the integrated homodyne current \(N(t)\)with \({\Omega=\gamma=\omega=1}\). The FPT distribution \(f_{N_{\rm th}}(t)\)and the modified distribution \(P_{N_{\rm th}}(n,T)\)can be computed by marginalizing over the respective random variables \(n\), and \(t\) and normalizing by \(G_{N_{\rm th}}(t)\). The Monte Carlo simulations of both are plotted as histograms, showing agreement with our methodology (solid). b) The expected FPT \({\rm E}[\tau_{N}]\)as computed by our method (solid purple) and Monte Carlo sampling using 1000 trajectories (dashed black). The shaded region represents 3 standard errors from the mean. 

suring the system and hence disturbing it. The quantum bound \(E[\tau_{N}](K+\mathcal{Q})\)aims precisely to amend for this: the quantity \(K+\mathcal{Q}\) is called the quantum dynamical activity [ 62 ], with \(\mathcal{Q}\)describing the activity from the unitary dynamics (in our example, the Rabi oscillations) [ 63 ]. 

_Homodyne detection.—_ For our second example we consider the di ff usive unraveling [Eq. ( 7 )] of Eq. ( 10 ). We choose \(\bar{n}=0\)\(\bar{n}=0\)and set \(\nu_{-}=1\)and \(\phi_{-}=-\pi/2\). This therefore corresponds to a homodyne detection of \(\sigma_{y}\). The charge reads \({N(t){=\sqrt{\gamma}\int_{0}^{t}\langle\sigma_{y}(t^{\prime})\rangle_{c}dt^{ \prime}+\int_{0}^{t}dW_{-}}}\). An example of the FPT for \(N_{\rm th}=1\)0is show in Fig.  2 (a). The right-hand plot describes \(P_{N_{\rm th}}(n,t)\)at the final time. Again, for consistency, we compare our method with the FPT obtained from histograming quantum trajectories simulated using Eq. ( 9 ). This model exhibits Rabi oscillations about the \({\sigma_{x}}\) axis, resulting in the FPT distribution displaying peaks and troughs, due to the oscillating nature of the integrated current, as shown in Fig.  2 (a). This therefore provides a clear illustration of how coherent e ff ects manifest in the shape of \(f_{N_{\rm th}}(t)\). Fig.  2 (b) presents the mean FPT \({\mathrm{E}[\tau_{N}]}\)for varying values of \(N_{\rm th}\) (solid-magenta). The black dashed line is an estimate obtained from 1000 stochastic trajectories and the shaded region represents three times the standard deviation from the estimated mean. This plot was chosen to illustrate how subtle features of the FPT — in this case the slightly non-linear behavior of \(E[\tau_{N}]\)with \(N_{\rm th}\)readily appear in our framework, despite requiring an excessively large number of quantum trajectories to be extracted. 

_Discussion and conclusions.—_ Our methodology is compatible with any type of master equation in the form ( 2 ), including time-dependent Hamiltonians. It therefore encompass a broad range of physical problems, from quantum optics to condensed matter. In addition, because Eqs. ( 4 ) and ( 9 ) are resolved in \(N\), it is straightforward to extend our method to incorporate \(N\)-dependent feedback. That is, to study models where \(H\) or \(\{L_{k}\}\) are modified depending on the current value of \(N(t)\)in a quantum trajectory. Despite not being the focus of this letter, we emphasize this connection because feedback and FPTs are actually conceptually very similar. Both require monitoring of a stochastic quantity and performing (or not) actions depending on its value. In the case of the FPT, the action is to continue or cease the dynamics. In the case of feedback, it is to modify the Liouvillian. 

Ref. [ 54 ] introduced a method that shares various similarities with ours, although they focused only on feedback. The main di ff erence is that they conditioned the dynamics on a filtered current \(D(t)=\int_{-\infty}^{t}dt^{\prime}\leavevmode\nobreak\ \gamma e^{-\gamma(t-t^{ \prime})}I(t^{\prime})\), with \(\gamma>0\). Here we condition instead on the net charge (formally equivalent to \(\gamma\to\infty\)). While their results focus only on di ff usive measurements of a single Hermitian jump operator, our framework captures both jump and di ff usion cases and includes multiple jump operators which need not be Hermitian. 

It is interesting to point out how feedback and FPT also share similar practical di ffi culties: using quantum trajectories one can implement arbitrary feedback strategies, as well as arbitrary FPT conditions (e.g. stopping for stochastic quantities other than \(N(t)\)). The excessive computational cost of quantum trajectories, however, hampers meaningful progress. Deterministic strategies, such as the one put forth in this letter, are therefore crucial. A famous example of a successful deterministic theory is that of current feedback put forth in Refs. [ 64 ,  65 ]. The significant impact it had in the field shows that even though it deals with a restrictive type of feedback, having a deterministic strategy is nonetheless extremely valuable. We believe a similar point can be made for our results. 

A particularly interesting application of our results is to the so-called gambling problems, such as that studied in [ 25 ]. This involves an agent which uses information about the system’s state to devise stopping strategies aimed at maximizing a certain goal, which can be relevant in the context of thermodynamics. For instance, in the qubit examples studied above, \(N(t)\)is related to the heat exchanged with the bath (in the case of quantum jumps) or to the work performed by a Rabi drive (in the case of quantum di ff usion). An agent with access to either of these quantities could then devise a strategy such as “stop the process whenever a certain amount of work has been extracted.” This has interesting thermodynamic impli