for the \(i\)th unit under treatment \(a\in\{0,1\}\), and let \(Y_{i}=R_{i}\) denote the observed outcome. Let \[\theta_{0}=E_{Q}\left[\frac{\omega(X_{i})}{E_{Q}[\omega(X_{i})]}\left(Y_{i}(1) -Y_{i}(0)\right)\right]~{},\]  for some known function \(\omega:\mathbf{R}^{d_{x}}\to\mathbf{R}\). It then follows from Assumption  2.1  that \(\theta_{0}\) solves the moment condition in ( 3 ) with \(m(\cdot)\)given by \[m(X_{i},A_{i},R_{i},\theta)=\omega(X_{i})\left(\frac{Y_{i}A_{i}}{\eta}-\frac{Y _{i}(1-A_{i})}{1-\eta}\right)-\omega(X_{i})\theta~{}.\]  Note that \(\theta_{0}\) defined in this way can accommodate the (cluster) size-weighted and equally-weighted average treatment effects considered in  Bugni et al.  ( 2022 ) and  Bai et al.  ( 2023c ) in the context of cluster-level randomized controlled trials. 

Example  [Log-Odds Ratio] Let \(Y_{i}(a)=R_{i}(a)\in\{0,1\}\) denote a binary potential outcome for the \(i\)th unit under treatment \(a\in\{0,1\}\), and let \(Y_{i}=R_{i}\)denote the observed outcome. Suppose \(0<P\{Y_{i}(a)=0\}<1\)for \(a\in\{0,1\}\), and let \(\theta_{0}=(\theta_{0}(1),\theta_{0}(2))^{\prime}\), where \[\theta_{0}(1)=\text{logit}(E_{Q}[Y_{i}(0)])~{},\]  \[\theta_{0}(2)=\text{logit}(E_{Q}[Y_{i}(1)])-\text{logit}(E_{Q}[Y_{i}(0)])~{},\]  with \(\text{logit}(z)=\log(\frac{z}{1-z})\), so that \(\theta_{0}(2)\)denotes the log-odds ratio of treatment \(1\)relative to treatment \(0\). It follows from Assumption  2.1  that \(\theta_{0}\) solves the moment condition in ( 3 ) with \(m(\cdot)\)given by \[m(X_{i},A_{i},R_{i},\theta)=\begin{pmatrix} 1-A_{i}\\ A_{i}\end{pmatrix}\left(Y_{i}-\text{expit}(\theta(1)+\theta(2)A_ {i})\right)~{},\]  where \(\text{expit}(z)=\frac{\exp(z)}{1+\exp(z)}\). The log-odds ratio can then be defined as \(h(\theta_{0})\)where \(h:\mathbf{R}^{2}\to\mathbf{R}\) is given by \(h(s,t)=t\). 

Additional examples could be obtained by considering combinations of Examples  2.1 â€“ 2.5 . For instance, combining the moment functions from Examples  2.3  and  2.4  would result in a weighted LATE parameter. Beyond these examples, certain treatment effect contrasts could also be related to the structural parameters in, for instance, a model of supply in demand: see, for example, the model estimated in  Casaburi and Reed ( 2022 ). 

Throughout the rest of the paper we consider the asymptotic properties of the method of moments estimator  \(\hat{\theta}_{n}\)\(\hat{\theta}_{n}\) for \(\theta_{0}\) which is constructed as a solution to the sample analogue of ( 3 ): 

\[\frac{1}{n}\sum_{1\leqslant i\leqslant n}m(X_{i},A_{i},R_{i},\hat{\theta}_{n}) =0~{}.\] (6)  

Note that  \(\hat{\theta}_{n}\)\(\hat{\theta}_{n}\) as defined in ( 6 ) is closely related to standard estimators of the parameter \(\theta_{0}\) in specific 